import "compiler.mm1";

do {
  (mmc-add '(
    (intrinsic @ proc (sys_write {fd : u32} {count : u32}
      (ghost @ mut {buf : (ref @ array u8 count)}) {p : (&sn buf)} : u32))

    (proc (main {n : u32})
      -- Convert number to simple digit display
      {{digit : u8} := (cast {n + 48})}  -- 48 is ASCII '0'
      {{buf : (array u8 1)} := (list digit)}
      {_ := (sys_write 1 1 buf (& buf))}
      )
  ))
  (mmc-finish 'test_print_arg)
};