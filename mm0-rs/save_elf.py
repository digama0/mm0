#!/usr/bin/env python3
# Simple script to extract ELF from MM0 output
import sys

# The ELF bytes from the output
elf_hex = "\x7fELF\x02\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00>\x00\x01\x00\x00\x00x\x00@\x00\x00\x00\x00\x00@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00@\x008\x00\x01\x00@\x00\x00\x00\x00\x00\x01\x00\x00\x00\x07\x00\x00\x00x\x00\x00\x00\x00\x00\x00\x00x\x00@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x00\x00\x00\x00\x00\x00\x00\xe8\x00\x00\x00\x00\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x00\xe8\x13\x00\x00\x00\xb8<\x00\x00\x003\xff\x0f\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00H\x83\xec\x11\xb8G\x00\x00\x00@\x88\x04$\xbao\x00\x00\x00@\x88T$\x01A\xb9t\x00\x00\x00D\x88L$\x02\xb8 \x00\x00\x00@\x88D$\x03\xbaa\x00\x00\x00@\x88T$\x04A\xb9r\x00\x00\x00D\x88L$\x05\xb8g\x00\x00\x00@\x88D$\x06\xbau\x00\x00\x00@\x88T$\x07A\xb9m\x00\x00\x00D\x88L$\x08\xb8e\x00\x00\x00@\x88D$\x09\xban\x00\x00\x00@\x88T$\nA\xb9t\x00\x00\x00D\x88L$\x0b\xb8:\x00\x00\x00@\x88D$\x0c\xba \x00\x00\x00@\x88T$\rA\xb94\x00\x00\x00D\x88L$\x0e\xb82\x00\x00\x00@\x88D$\x0f\xba\n\x00\x00\x00@\x88T$\x10H\x8d4$\xb8\x01\x00\x00\x00H\xc7\xc7\x01\x00\x00\x00H\xc7\xc2\x11\x00\x00\x00\x0f\x05H\x83\xc4\x11\xc3"

# Write as binary
with open('test_main_arg.elf', 'wb') as f:
    f.write(elf_hex.encode('latin1'))